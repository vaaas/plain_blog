<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<meta name="generator" content="Plain blog">
	<title>{{= it.blog.title }}</title>
	<meta name="description" content="{{= it.blog.description }}">
	<meta name="keywords" content="{{= it.blog.keywords.join(', ') }}">
	<meta name="author" content="{{= it.blog.author }}">
	<link rel="stylesheet" href="/static/style.css">
	<link rel="alternate" type="application/rss+xml" href="/feeds/rss.xml">
	<link rel="alternate" type="application/atom+xml" href="/feeds/atom.xml">
	<link rel="icon" type="image/png" href="/static/favicon.png">
</head>
<body>
<header>
	<img src="/static/portrait.jpg" width="124" height="124">
	<h1><a href="/">{{= it.blog.title }}</a></h1>
	<h2>{{= it.blog.description }}</h2>
</header>

{{? it.type === "collection"}}
	<main class="collection">
		{{~it.posts:post:postid}}
		{{
			var d = new Date (post.published);
			d = d.getDate() + "-" + d.getMonth() + "-" + d.getFullYear();
		}}
		<article class="card">
			<h1><a href="/posts/{{=post.id}}">{{=post.title}}</a></h1>
			<div class="published">Posted on {{=d}}</div>
			{{? post.categories}}
				<div class="categories">
					Under
					{{~post.categories:category:catid}}
						<a href="/posts?category={{=category}}">{{=category}}</a>
					{{~}}
				</div>
			{{?}}
			{{=post.blurb}}
			<a class="card readmore" href="/posts/{{=post.id}}">Read more</a>
		</article>
		{{~}}
	</main>
	<nav>
		<a class="card" id="prev" href="/posts?{{? it.category}}category={{=it.category}}&amp;{{?}}after={{=it.posts[0].id}}">←</a>
		<a class="card" id="next" href="/posts?{{? it.category}}category={{=it.category}}&amp;{{?}}before={{=it.posts[it.posts.length-1].id}}">→</a>
	</nav>

{{?? it.type === "element"}}
	{{
		var d = new Date (it.post.published);
		d = d.getDate() + "-" + d.getMonth() + "-" + d.getFullYear();
	}}
	<main class="element">
		<h1><a href="/posts/{{=it.post.id}}">{{=it.post.title}}</a></h1>
		<div class="published">Posted on {{=d}}</div>
		{{? it.post.categories}}
			<div class="categories">
				Under
				{{~it.post.categories:category:catid}}
					<a href="/posts?category={{=category}}">{{=category}}</a>
				{{~}}
			</div>
		{{?}}
		{{=it.post.contents}}
	</main>

{{?? it.type === "empty" }}
	<main class="empty">
		<h1>Nothing found!</h1>
		<div>
			<a href="#" onclick="window.history.back();">Go back</a>
			<a href="/">Home</a>
		</div>
	</main>

{{?}}

</body>
</html>
